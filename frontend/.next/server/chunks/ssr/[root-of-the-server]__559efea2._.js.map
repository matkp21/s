{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/s/frontend/src/lib/utils.ts"],"sourcesContent":["\nimport { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AACA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,yNAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/s/frontend/src/hooks/use-toast.ts"],"sourcesContent":["\n// This file is unused now, but we can keep it for future use.\n\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/s/frontend/src/components/layout/sidebar-nav.tsx"],"sourcesContent":["// src/components/layout/sidebar-nav.tsx\n\"use client\";\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport {\n  SidebarHeader,\n  SidebarContent,\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n  SidebarFooter,\n  useSidebar,\n} from '@/components/ui/sidebar';\nimport { Logo } from '@/components/logo';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport {\n  Home,\n  MessageSquareHeart,\n  ClipboardList,\n  ScanEye,\n  Settings2,\n  LogOut,\n  GraduationCap,\n  BriefcaseMedical,\n  Library,\n  Info,\n  HeartPulse,\n  PillIcon,\n  BellRing,\n  Orbit,\n} from 'lucide-react';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n  TooltipProvider,\n} from \"@/components/ui/tooltip\";\nimport { cn } from '@/lib/utils';\nimport { useProMode, type UserRole } from '@/contexts/pro-mode-context';\nimport { useToast } from '@/hooks/use-toast';\nimport { Badge } from '@/components/ui/badge';\n\ninterface SidebarNavProps {\n  unreadNotificationCount: number;\n}\n\n// A more declarative and maintainable way to define navigation items.\n// The `roles` array determines who sees the link. `null` is for guests.\nconst allNavItems = [\n  { href: '/', label: 'Home', icon: Home, ariaLabel: 'Go to Home page', roles: ['pro', 'medico', 'diagnosis', null] },\n  { href: '/chat', label: 'Chat', icon: MessageSquareHeart, ariaLabel: 'Open Chat interface', roles: ['pro', 'medico', 'diagnosis', null] },\n  { href: '/medications', label: 'Medications', icon: PillIcon, ariaLabel: 'Manage Medications', roles: ['pro', 'medico', 'diagnosis', null] },\n  { href: '/ar-viewer', label: 'AR Viewer', icon: ScanEye, ariaLabel: 'Open AR Viewer', roles: ['pro', 'medico', 'diagnosis', null] },\n  { href: '/explorer', label: '3D Explorer', icon: Orbit, ariaLabel: 'Open 3D Interactive Explorer', roles: ['pro', 'medico', 'diagnosis', null] },\n  { href: '/pro', label: 'Clinical Suite', icon: BriefcaseMedical, ariaLabel: 'Open Professional Clinical Suite', roles: ['pro'] },\n  { href: '/patient-management', label: 'Patient Management', icon: ClipboardList, ariaLabel: 'Open Patient Management', roles: ['pro'] },\n  { href: '/medico', label: 'Medico Hub', icon: GraduationCap, ariaLabel: 'Open Medico Study Hub', roles: ['medico'] },\n  { href: '/medico/library', label: 'Study Library', icon: Library, ariaLabel: 'Open Study Library', roles: ['medico'] },\n  { href: '/notifications', label: 'Notifications', icon: BellRing, ariaLabel: 'View Notifications', roles: ['pro', 'medico', 'diagnosis'] },\n  { href: '/feedback', label: 'Feedback', icon: Info, ariaLabel: 'Submit Feedback', roles: ['pro', 'medico', 'diagnosis'] },\n];\n\nexport function SidebarNav({ unreadNotificationCount }: SidebarNavProps) {\n  const pathname = usePathname();\n  const { userRole } = useProMode();\n  const { toast } = useToast();\n  const { isMobile, state: sidebarState } = useSidebar();\n\n  const handleLogout = () => {\n    toast({\n      title: \"Logout Action\",\n      description: \"Logout functionality would be implemented here. For now, you remain logged in.\",\n    });\n  };\n\n  // Filter navigation items based on the current user role\n  const navItems = allNavItems.filter(item => item.roles.includes(userRole));\n\n  return (\n    <TooltipProvider>\n      <SidebarHeader className=\"p-2 pt-3\">\n        <Logo />\n      </SidebarHeader>\n      <SidebarContent className=\"p-2\">\n        <SidebarMenu>\n          {navItems.map((item) => {\n            const isActive = item.href === '/'\n              ? pathname === '/'\n              : pathname.startsWith(item.href);\n\n            const isNotifications = item.href === '/notifications';\n            const badgeCount = isNotifications ? unreadNotificationCount : 0;\n\n            return (\n              <SidebarMenuItem key={item.href}>\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <SidebarMenuButton\n                      asChild\n                      isActive={isActive}\n                      aria-label={item.ariaLabel}\n                      className={cn(\n                        \"justify-start w-full rounded-lg group transition-all duration-200 ease-in-out sidebar-item-shine\",\n                        \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-md\",\n                        isActive\n                          ? \"bg-sidebar-active-background text-sidebar-active-foreground shadow-lg font-semibold sidebar-active-item-glow\"\n                          : \"text-sidebar-foreground/80 hover:text-sidebar-foreground\",\n                        \"focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-1 focus-visible:ring-offset-sidebar-background\"\n                      )}\n                    >\n                      <Link href={item.href} className=\"flex items-center justify-between w-full\">\n                        <div className=\"flex items-center gap-2\">\n                          <item.icon className={cn(\n                              \"h-5 w-5 transition-transform duration-200 ease-in-out\",\n                              \"group-hover:scale-110\",\n                              isActive && \"text-sidebar-active-foreground\"\n                             )}\n                           />\n                          <span>{item.label}</span>\n                        </div>\n                        {isNotifications && badgeCount > 0 && (\n                           <Badge className=\"sidebar-notification-badge h-5 px-1.5 text-xs ml-auto group-data-[collapsible=icon]:hidden\">\n                             {badgeCount}\n                           </Badge>\n                        )}\n                      </Link>\n                    </SidebarMenuButton>\n                  </TooltipTrigger>\n                  {(sidebarState === \"collapsed\" || isMobile) && (\n                    <TooltipContent\n                      side=\"right\"\n                      align=\"center\"\n                      className=\"bg-sidebar text-sidebar-foreground border-sidebar-border shadow-md\"\n                    >\n                      {item.label}\n                      {isNotifications && badgeCount > 0 && ` (${badgeCount})`}\n                    </TooltipContent>\n                  )}\n                </Tooltip>\n              </SidebarMenuItem>\n            );\n          })}\n        </SidebarMenu>\n      </SidebarContent>\n      <SidebarFooter className=\"p-2 border-t border-sidebar-border/50\">\n        <SidebarMenu>\n          <SidebarMenuItem>\n             <Tooltip>\n                <TooltipTrigger asChild>\n                  <Link href=\"/settings\" passHref legacyBehavior>\n                    <SidebarMenuButton\n                        as=\"a\" // Important for legacyBehavior with Link\n                        isActive={pathname.startsWith('/settings')}\n                        aria-label=\"Open Settings\"\n                        className={cn(\n                            \"justify-start w-full rounded-lg group transition-all duration-200 ease-in-out sidebar-item-shine\",\n                            \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-md\",\n                            pathname.startsWith('/settings')\n                            ? \"bg-sidebar-active-background text-sidebar-active-foreground shadow-lg font-semibold sidebar-active-item-glow\"\n                            : \"text-sidebar-foreground/80 hover:text-sidebar-foreground\",\n                            \"focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-1 focus-visible:ring-offset-sidebar-background\"\n                        )}\n                    >\n                        <Settings2 className={cn(\n                            \"h-5 w-5 transition-transform duration-200 ease-in-out\",\n                            \"group-hover:scale-110\",\n                            pathname.startsWith('/settings') && \"text-sidebar-active-foreground\"\n                        )} />\n                        <span>Settings</span>\n                    </SidebarMenuButton>\n                  </Link>\n                </TooltipTrigger>\n                {(sidebarState === \"collapsed\" || isMobile) && (\n                    <TooltipContent\n                        side=\"right\"\n                        align=\"center\"\n                        className=\"bg-sidebar text-sidebar-foreground border-sidebar-border shadow-md\"\n                    >\n                        Settings\n                    </TooltipContent>\n                )}\n            </Tooltip>\n          </SidebarMenuItem>\n          <SidebarMenuItem>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <SidebarMenuButton\n                  onClick={handleLogout}\n                  aria-label=\"Logout\"\n                  className={cn(\n                    \"justify-start w-full rounded-lg group transition-all duration-200 ease-in-out sidebar-item-shine\",\n                    \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-md\",\n                     \"text-sidebar-foreground/80 hover:text-sidebar-foreground\",\n                    \"focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-1 focus-visible:ring-offset-sidebar-background\"\n                  )}\n                >\n                  <LogOut className={cn(\"h-5 w-5 transition-transform duration-200 ease-in-out\", \"group-hover:scale-110\")} />\n                  <span>Logout</span>\n                </SidebarMenuButton>\n              </TooltipTrigger>\n              {(sidebarState === \"collapsed\" || isMobile) && (\n                <TooltipContent\n                    side=\"right\"\n                    align=\"center\"\n                    className=\"bg-sidebar text-sidebar-foreground border-sidebar-border shadow-md\"\n                >\n                    Logout\n                </TooltipContent>\n              )}\n            </Tooltip>\n          </SidebarMenuItem>\n        </SidebarMenu>\n        <div className=\"flex items-center gap-3 p-3 mt-2\">\n          <Avatar className=\"h-10 w-10 border-2 border-sidebar-accent\">\n            <AvatarImage src=\"https://picsum.photos/id/237/200/200\" alt=\"User Avatar\" data-ai-hint=\"user doctor\" />\n             <AvatarFallback className=\"bg-gradient-to-br from-sidebar-accent to-sidebar-primary/30 text-sidebar-primary-foreground glowing-ring-firebase\">\n              <HeartPulse className=\"h-5 w-5\" />\n            </AvatarFallback>\n          </Avatar>\n          {(sidebarState === \"expanded\" && !isMobile) && (\n            <div className=\"flex flex-col overflow-hidden\">\n                <span className=\"text-sm font-medium text-sidebar-foreground truncate\">Dr. Medi User</span>\n                <span className=\"text-xs text-sidebar-foreground/70 truncate\">\n                {userRole === 'pro' ? 'Professional' : userRole === 'medico' ? 'Medical Student' : 'Patient/User'}\n                </span>\n            </div>\n          )}\n        </div>\n      </SidebarFooter>\n    </TooltipProvider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 740, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/s/frontend/src/components/layout/app-layout.tsx"],"sourcesContent":["// src/components/layout/app-layout.tsx\n\"use client\";\n\nimport type { ReactNode } from 'react';\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { SidebarProvider, Sidebar, SidebarInset, SidebarTrigger } from '@/components/ui/sidebar';\nimport { SidebarNav } from './sidebar-nav';\nimport { Button } from '@/components/ui/button';\nimport {\n  Settings, LogOut, UserCircle, Sparkles, Info,\n  MessageSquareHeart, BriefcaseMedical, School, Stethoscope, UserCog, Bell, ChevronDown, Edit, HeartPulse,\n  Moon, Sun, Loader2\n} from 'lucide-react';\nimport { Logo } from '@/components/logo';\nimport Link from 'next/link';\nimport { cn } from '@/lib/utils';\nimport { Footer } from './footer';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { useProMode, type UserRole } from '@/contexts/pro-mode-context';\nimport { useTheme } from '@/contexts/theme-provider'; \nimport { Badge } from '@/components/ui/badge';\nimport { AnimatedTagline } from '@/components/layout/animated-tagline';\nimport type { NotificationItem } from '@/types/notifications';\nimport { useToast } from '@/hooks/use-toast';\nimport { NotificationPanelCompact } from './notification-panel-compact';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n  DropdownMenuPortal,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n} from \"@/components/ui/dropdown-menu\";\n\nconst ThemeToggleButton = () => {\n  const { theme, setTheme, resolvedTheme } = useTheme();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => setMounted(true), []);\n\n  if (!mounted) {\n    return <div className=\"h-9 w-9 sm:h-10 sm:w-10\" />; \n  }\n\n  const toggle = () => {\n    setTheme(resolvedTheme === 'dark' ? 'light' : 'dark');\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggle}\n      className=\"h-9 w-9 sm:h-10 sm:w-10 rounded-full text-foreground/80 hover:text-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n      aria-label={resolvedTheme === 'dark' ? \"Switch to light theme\" : \"Switch to dark theme\"}\n    >\n      {resolvedTheme === 'dark' ? <Sun className=\"h-5 w-5\" /> : <Moon className=\"h-5 w-5\" />}\n    </Button>\n  );\n};\n\n\nexport function AppLayout({ children }: { children: ReactNode }) {\n  const [scrolled, setScrolled] = useState(false);\n  const { userRole, selectUserRole } = useProMode();\n  const { toast } = useToast();\n  const router = useRouter();\n\n  const [notifications, setNotifications] = useState<NotificationItem[]>([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [isAccountMenuOpen, setIsAccountMenuOpen] = useState(false);\n  const [isNotificationPanelOpen, setIsNotificationPanelOpen] = useState(false);\n  const notificationPanelRef = useRef<HTMLDivElement>(null);\n  const notificationBellRef = useRef<HTMLButtonElement>(null);\n  \n  const fetchNotifications = useCallback(() => {\n    const mockNotifications: NotificationItem[] = [\n      { id: '1', type: 'medication_reminder', title: 'Medication Reminder', body: 'Time for Amoxicillin (500mg). Check instructions.', timestamp: new Date(Date.now() - 1000 * 60 * 5), isRead: false, deepLink: '/medications' },\n      { id: 'sys-maint', type: 'system_update', title: 'System Maintenance Scheduled', body: 'Brief maintenance tonight at 2 AM. No impact expected.', timestamp: new Date(Date.now() - 1000 * 60 * 30), isRead: false, deepLink: '/' },\n      { id: '2', type: 'appointment_reminder', title: 'Appointment Soon', body: 'Cardiology check-up in 1 hour. Remember pre-appointment notes.', timestamp: new Date(Date.now() - 1000 * 60 * 60 * 2), isRead: true, deepLink: '/' },\n      { id: '3', type: 'study_material_update', title: 'New Notes Available', body: 'Endocrine System notes updated with latest diagrams.', timestamp: new Date(Date.now() - 1000 * 60 * 60 * 24), isRead: false, deepLink: '/medico' },\n    ];\n    const sortedNotifications = mockNotifications.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\n    setNotifications(sortedNotifications);\n    setUnreadCount(sortedNotifications.filter(n => !n.isRead).length);\n  }, []);\n\n  useEffect(() => {\n    fetchNotifications();\n    const handleScroll = () => {\n      if (typeof window !== 'undefined') {\n        setScrolled(window.scrollY > 20);\n      }\n    };\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [fetchNotifications]);\n  \n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (notificationPanelRef.current && !notificationPanelRef.current.contains(event.target as Node) &&\n          notificationBellRef.current && !notificationBellRef.current.contains(event.target as Node)) {\n        setIsNotificationPanelOpen(false);\n      }\n    };\n    if (isNotificationPanelOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isNotificationPanelOpen]);\n\n\n  const handleMarkAsRead = useCallback((id: string) => {\n    setNotifications(prev => {\n      const newNotifications = prev.map(n => n.id === id ? { ...n, isRead: true } : n);\n      setUnreadCount(newNotifications.filter(n => !n.isRead).length);\n      return newNotifications;\n    });\n  }, []);\n\n  const handleMarkAllAsRead = useCallback(() => {\n    setNotifications(prev => prev.map(n => ({ ...n, isRead: true })));\n    setUnreadCount(0);\n    toast({ title: \"Notifications Updated\", description: \"All notifications marked as read.\" });\n    setIsNotificationPanelOpen(false);\n  }, [toast]);\n  \n  const handleViewAllNotifications = () => {\n    router.push('/notifications');\n    setIsNotificationPanelOpen(false);\n  };\n\n  const handleLogout = () => {\n    toast({ title: \"Logged Out\", description: \"You have been successfully logged out. (Demo)\" });\n    selectUserRole(null); \n    setIsAccountMenuOpen(false); \n    setIsNotificationPanelOpen(false);\n    sessionStorage.removeItem('welcomeDisplayShown'); \n    router.push('/login'); \n  };\n\n  const getRoleDisplayString = (role: UserRole | null): string => {\n    if (role === 'pro') return 'Professional';\n    if (role === 'medico') return 'Medical Student';\n    if (role === 'diagnosis') return 'Patient/User';\n    return 'Guest';\n  };\n  \n  return (\n    <SidebarProvider defaultOpen={true}>\n      <Sidebar\n        variant=\"sidebar\"\n        collapsible=\"icon\"\n        side=\"left\"\n        className=\"border-r border-sidebar-border/50\"\n      >\n        <SidebarNav unreadNotificationCount={unreadCount} />\n      </Sidebar>\n      <SidebarInset className=\"flex flex-col bg-background\">\n        <header\n          className={cn(\n            \"sticky top-0 z-40 flex items-center justify-between gap-4 border-b bg-background/70 backdrop-blur-md px-4 md:px-6 transition-all duration-300 ease-in-out fade-in\",\n            scrolled ? \"h-14 shadow-md\" : \"h-16 border-transparent\"\n          )}\n          id=\"main-header\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <SidebarTrigger />\n            <div className={cn(\"transition-all duration-300\", scrolled ? \"opacity-0 md:opacity-100\" : \"opacity-100\")}>\n              <Link href=\"/\" className=\"flex items-center gap-2\" aria-label=\"Go to homepage\">\n                <Logo simple={scrolled} />\n              </Link>\n            </div>\n          </div>\n\n          <div className=\"hidden md:flex flex-1 items-center justify-center px-4\">\n             <AnimatedTagline />\n          </div>\n\n          <nav className=\"flex items-center gap-2 sm:gap-3\">\n            <ThemeToggleButton /> \n            \n            <Button\n                ref={notificationBellRef}\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"relative h-9 w-9 sm:h-10 sm:w-10 rounded-full text-foreground/80 hover:text-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n                aria-label=\"Toggle notifications panel\"\n                onClick={() => setIsNotificationPanelOpen(prev => !prev)}\n            >\n                <Bell className=\"h-5 w-5\" />\n                {unreadCount > 0 && (\n                <Badge variant=\"destructive\" className=\"absolute -top-1 -right-1 h-4 w-4 min-w-0 p-0 flex items-center justify-center text-xs animate-pulse\">\n                    {unreadCount > 9 ? '9+' : unreadCount}\n                </Badge>\n                )}\n            </Button>\n            {isNotificationPanelOpen && (\n                <div ref={notificationPanelRef}>\n                    <NotificationPanelCompact\n                    notifications={notifications.slice(0, 7)}\n                    hasUnreadNotifications={unreadCount > 0}\n                    onClose={() => setIsNotificationPanelOpen(false)}\n                    onMarkAllAsRead={handleMarkAllAsRead}\n                    onMarkAsRead={handleMarkAsRead}\n                    onViewAllNotifications={handleViewAllNotifications}\n                    className={unreadCount > 0 ? \"notification-panel-animated-border\" : \"\"}\n                    />\n                </div>\n            )}\n            \n            {userRole === 'pro' && (\n              <Badge variant=\"outline\" className=\"border-primary/50 text-primary bg-primary/10 hidden sm:flex items-center gap-1.5 py-1 px-2.5\">\n                <Sparkles className=\"h-3.5 w-3.5\" />\n                Pro Features\n              </Badge>\n            )}\n            \n             <DropdownMenu open={isAccountMenuOpen} onOpenChange={setIsAccountMenuOpen}>\n                <DropdownMenuTrigger asChild>\n                   <Button\n                    variant=\"ghost\"\n                    className=\"relative h-9 w-9 sm:h-10 sm:w-10 rounded-full text-foreground/80 hover:text-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 p-0\"\n                    aria-label=\"Open user menu\"\n                  >\n                    <Avatar className=\"h-8 w-8 sm:h-9 sm:w-9\">\n                        <AvatarImage src=\"https://picsum.photos/id/237/200/200\" alt=\"User Avatar\" data-ai-hint=\"user doctor\" />\n                         <AvatarFallback className=\"bg-gradient-to-br from-primary via-accent to-primary/70 text-primary-foreground\">\n                            <HeartPulse className=\"h-5 w-5\"/>\n                        </AvatarFallback>\n                    </Avatar>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-64 rounded-xl shadow-lg border-border/50 bg-card\">\n                    <DropdownMenuLabel className=\"px-3 py-2\">\n                    <div className=\"flex items-center gap-2\">\n                        <Avatar className=\"h-9 w-9\">\n                            <AvatarImage src=\"https://picsum.photos/id/237/200/200\" alt=\"User Avatar\" data-ai-hint=\"user doctor\" />\n                            <AvatarFallback className=\"bg-gradient-to-br from-primary to-accent text-primary-foreground\">\n                                DR\n                            </AvatarFallback>\n                        </Avatar>\n                        <div>\n                            <p className=\"text-sm font-medium text-foreground\">Dr. Medi User</p>\n                            <p className=\"text-xs text-muted-foreground\">medi.user@example.com</p>\n                        </div>\n                    </div>\n                    </DropdownMenuLabel>\n                    <DropdownMenuSeparator />\n                    <DropdownMenuItem asChild>\n                      <Link href=\"/profile\" className=\"flex items-center gap-2 cursor-pointer\" onClick={() => setIsAccountMenuOpen(false)}>\n                        <UserCircle className=\"h-4 w-4 text-muted-foreground\" /> Profile\n                      </Link>\n                    </DropdownMenuItem>\n                    <DropdownMenuItem asChild>\n                      <Link href=\"/settings\" className=\"flex items-center gap-2 cursor-pointer\" onClick={() => setIsAccountMenuOpen(false)}>\n                        <Settings className=\"h-4 w-4 text-muted-foreground\" /> Settings\n                      </Link>\n                    </DropdownMenuItem>\n                     <DropdownMenuItem asChild>\n                        <Link href=\"/notifications\" className=\"flex items-center gap-2 cursor-pointer\" onClick={() => { setIsAccountMenuOpen(false); setIsNotificationPanelOpen(false);}}>\n                           <Bell className=\"h-4 w-4 text-muted-foreground\" /> Notifications\n                           {unreadCount > 0 && (\n                            <Badge variant=\"destructive\" className=\"ml-auto h-5 px-1.5 text-xs\">\n                                {unreadCount}\n                            </Badge>\n                           )}\n                        </Link>\n                    </DropdownMenuItem>\n                    <DropdownMenuSub>\n                    <DropdownMenuSubTrigger className=\"flex items-center justify-between gap-2 cursor-pointer\">\n                        <div className=\"flex items-center gap-2\">\n                            <UserCog className=\"h-4 w-4 text-muted-foreground\" />\n                            <span>\n                                Role: <span className={cn(userRole !== null && \"firebase-gradient-text-active-role font-semibold\")}>{getRoleDisplayString(userRole)}</span>\n                            </span>\n                        </div>\n                        <ChevronDown className=\"h-4 w-4 text-muted-foreground opacity-70\" />\n                    </DropdownMenuSubTrigger>\n                    <DropdownMenuPortal>\n                        <DropdownMenuSubContent>\n                        <DropdownMenuRadioGroup value={userRole || ''} onValueChange={(role) => { selectUserRole(role as UserRole); setIsAccountMenuOpen(false);}}>\n                            <DropdownMenuRadioItem value=\"pro\" className=\"flex items-center gap-2 cursor-pointer\">\n                                <BriefcaseMedical className=\"h-4 w-4 text-purple-500\" />\n                                <span className={cn(userRole === 'pro' && \"firebase-gradient-text-active-role font-semibold\")}>Professional</span>\n                            </DropdownMenuRadioItem>\n                            <DropdownMenuRadioItem value=\"medico\" className=\"flex items-center gap-2 cursor-pointer\">\n                                <School className=\"h-4 w-4 text-sky-500\" />\n                                <span className={cn(userRole === 'medico' && \"firebase-gradient-text-active-role font-semibold\")}>Medical Student</span>\n                            </DropdownMenuRadioItem>\n                            <DropdownMenuRadioItem value=\"diagnosis\" className=\"flex items-center gap-2 cursor-pointer\">\n                                <Stethoscope className=\"h-4 w-4 text-green-500\" />\n                                <span className={cn(userRole === 'diagnosis' && \"firebase-gradient-text-active-role font-semibold\")}>Patient/User</span>\n                            </DropdownMenuRadioItem>\n                             <DropdownMenuRadioItem value=\"\" className=\"flex items-center gap-2 cursor-pointer\">\n                                <UserCircle className=\"h-4 w-4 text-muted-foreground\" />\n                                <span className={cn(userRole === null && \"firebase-gradient-text-active-role font-semibold\")}>Guest</span>\n                            </DropdownMenuRadioItem>\n                        </DropdownMenuRadioGroup>\n                        </DropdownMenuSubContent>\n                    </DropdownMenuPortal>\n                    </DropdownMenuSub>\n                    <DropdownMenuSeparator />\n                    <DropdownMenuItem onClick={handleLogout} className=\"flex items-center gap-2 text-destructive focus:bg-destructive/10 focus:text-destructive cursor-pointer\">\n                    <LogOut className=\"h-4 w-4\" /> Log Out\n                    </DropdownMenuItem>\n                </DropdownMenuContent>\n            </DropdownMenu>\n          </nav>\n        </header>\n        <main className=\"flex-1 flex flex-col overflow-auto relative\">\n          <div className=\"container mx-auto flex-grow py-6 sm:py-10\">\n            {children}\n          </div>\n        </main>\n        <Footer />\n      </SidebarInset>\n    </SidebarProvider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1640, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/s/frontend/src/components/layout/app-content-controller.tsx"],"sourcesContent":["// src/components/layout/app-content-controller.tsx\n\"use client\";\n\nimport React, { type ReactNode } from 'react';\nimport { usePathname } from 'next/navigation';\nimport { useProMode } from '@/contexts/pro-mode-context';\nimport { useClientState } from '@/contexts/client-state-provider';\nimport { Loader2 } from 'lucide-react';\nimport { OnboardingModal } from '@/components/onboarding/onboarding-modal';\nimport WelcomeDisplay from '@/components/welcome/welcome-display';\nimport { AppLayout } from '@/components/layout/app-layout';\n\nexport function AppContentController({ children }: { children: ReactNode }) {\n  const { user, loading: authLoading } = useProMode();\n  const {\n    isClient,\n    onboardingComplete,\n    setOnboardingComplete,\n    welcomeShownThisSession,\n    setWelcomeShownThisSession\n  } = useClientState();\n\n  const pathname = usePathname();\n\n  const displayState = React.useMemo(() => {\n    if (!isClient || authLoading) {\n      return 'loading';\n    }\n    // Auth pages should always render immediately.\n    if (['/login', '/signup'].includes(pathname)) {\n        return 'app';\n    }\n    // If we have a user but they haven't finished onboarding, show it.\n    if (user && !onboardingComplete) {\n      return 'onboarding';\n    }\n    // If the user exists, onboarding is done, but they haven't seen the welcome screen this session, show it.\n    if (user && onboardingComplete && !welcomeShownThisSession) {\n      return 'welcome';\n    }\n    // Otherwise, show the main app content.\n    return 'app';\n  }, [isClient, authLoading, user, onboardingComplete, welcomeShownThisSession, pathname]);\n\n  const handleOnboardingClose = () => {\n    setOnboardingComplete(true);\n  };\n\n  const handleWelcomeComplete = () => {\n    setWelcomeShownThisSession(true);\n  };\n  \n  // Render auth pages outside the main app layout structure.\n  if (['/login', '/signup'].includes(pathname)) {\n    return <>{children}</>;\n  }\n\n  switch (displayState) {\n    case 'loading':\n      return <div className=\"fixed inset-0 bg-background flex items-center justify-center\"><Loader2 className=\"h-12 w-12 animate-spin text-primary\" /></div>;\n    case 'onboarding':\n      return <OnboardingModal isOpen={true} onClose={handleOnboardingClose} />;\n    case 'welcome':\n      return <WelcomeDisplay onDisplayComplete={handleWelcomeComplete} />;\n    case 'app':\n      return <AppLayout>{children}</AppLayout>;\n    default:\n      return <div className=\"fixed inset-0 bg-background flex items-center justify-center\"><Loader2 className=\"h-12 w-12 animate-spin text-primary\" /></div>;\n  }\n}\n"],"names":[],"mappings":"AAAA,mDAAmD;;;;;AAGnD;AACA;;;;;;;;;;;AAGA;;;;;;;;;;;AAGA;AATA;;;;;;;;;;AAWO,SAAS,qBAAqB,EAAE,QAAQ,EAA2B;IACxE,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG;IACvC,MAAM,EACJ,QAAQ,EACR,kBAAkB,EAClB,qBAAqB,EACrB,uBAAuB,EACvB,0BAA0B,EAC3B,GAAG;IAEJ,MAAM,WAAW,CAAA,GAAA,ySAAA,CAAA,cAAW,AAAD;IAE3B,MAAM,eAAe,4WAAA,CAAA,UAAK,CAAC,OAAO,CAAC;QACjC,IAAI,CAAC,YAAY,aAAa;YAC5B,OAAO;QACT;QACA,+CAA+C;QAC/C,IAAI;YAAC;YAAU;SAAU,CAAC,QAAQ,CAAC,WAAW;YAC1C,OAAO;QACX;QACA,mEAAmE;QACnE,IAAI,QAAQ,CAAC,oBAAoB;YAC/B,OAAO;QACT;QACA,0GAA0G;QAC1G,IAAI,QAAQ,sBAAsB,CAAC,yBAAyB;YAC1D,OAAO;QACT;QACA,wCAAwC;QACxC,OAAO;IACT,GAAG;QAAC;QAAU;QAAa;QAAM;QAAoB;QAAyB;KAAS;IAEvF,MAAM,wBAAwB;QAC5B,sBAAsB;IACxB;IAEA,MAAM,wBAAwB;QAC5B,2BAA2B;IAC7B;IAEA,2DAA2D;IAC3D,IAAI;QAAC;QAAU;KAAU,CAAC,QAAQ,CAAC,WAAW;QAC5C,qBAAO;sBAAG;;IACZ;IAEA,OAAQ;QACN,KAAK;YACH,qBAAO,qZAAC;gBAAI,WAAU;0BAA+D,cAAA,qZAAC,qSAAA,CAAA,UAAO;oBAAC,WAAU;;;;;;;;;;;QAC1G,KAAK;YACH,qBAAO,qZAAC;gBAAgB,QAAQ;gBAAM,SAAS;;;;;;QACjD,KAAK;YACH,qBAAO,qZAAC;gBAAe,mBAAmB;;;;;;QAC5C,KAAK;YACH,qBAAO,qZAAC,yJAAA,CAAA,YAAS;0BAAE;;;;;;QACrB;YACE,qBAAO,qZAAC;gBAAI,WAAU;0BAA+D,cAAA,qZAAC,qSAAA,CAAA,UAAO;oBAAC,WAAU;;;;;;;;;;;IAC5G;AACF","debugId":null}},
    {"offset": {"line": 1789, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/s/frontend/src/components/layout/client-layout-wrapper.tsx"],"sourcesContent":["// src/components/layout/client-layout-wrapper.tsx\n\"use client\";\n\nimport { ProModeProvider } from '@/contexts/pro-mode-context';\nimport { ThemeProvider } from '@/contexts/theme-provider';\nimport { Toaster } from '@/components/ui/toaster';\nimport { ClientStateProvider } from '@/contexts/client-state-provider';\nimport { AppContentController } from './app-content-controller';\nimport { ReactNode } from 'react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\nconst queryClient = new QueryClient();\n\nexport function ClientLayoutWrapper({ children }: { children: ReactNode }) {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider defaultTheme=\"dark\" storageKey=\"mediassistant-theme\">\n        <ProModeProvider>\n          <ClientStateProvider>\n            <AppContentController>\n              {children}\n            </AppContentController>\n            <Toaster />\n          </ClientStateProvider>\n        </ProModeProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n"],"names":[],"mappings":"AAAA,kDAAkD;;;;;;;;;;;;;;;;;;;;;;;;;AAOlD;AAEA;AAAA;AARA;;;;;;;;AAUA,MAAM,cAAc,IAAI,sPAAA,CAAA,cAAW;AAE5B,SAAS,oBAAoB,EAAE,QAAQ,EAA2B;IACvE,qBACE,qZAAC,sRAAA,CAAA,sBAAmB;QAAC,QAAQ;kBAC3B,cAAA,qZAAC;YAAc,cAAa;YAAO,YAAW;sBAC5C,cAAA,qZAAC;0BACC,cAAA,qZAAC;;sCACC,qZAAC,wKAAA,CAAA,uBAAoB;sCAClB;;;;;;sCAEH,qZAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AAMb","debugId":null}}]
}